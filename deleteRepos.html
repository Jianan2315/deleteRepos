<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>GitHub 仓库批量删除（本地可视化）</title>
    <link rel="stylesheet" href="deleteRepos.css">
</head>
<body>
<div class="container">
    <div class="card">
        <div class="card-header">
            <h1>GitHub 仓库批量删除（仅在本地打开此 HTML 使用）</h1>
            <span class="chip">安全提示：不要部署到公共网站</span>
        </div>
        <div class="content">
            <div class="row">
                <div>
                    <label>GitHub 用户名</label>
                    <input id="user" type="text" placeholder="your-username" />
                </div>
                <div>
                    <label>Personal Access Token（仅 classic，需勾选 <code>delete_repo</code>）</label>
                    <input id="token" type="password" placeholder="ghp_..." autocomplete="off" />
                </div>
                <div style="display:flex; align-items:flex-end; gap:8px;">
                    <button id="load" class="btn btn-primary">加载仓库</button>
                    <button id="clearToken" class="btn" title="清除内存中的 token">清空密钥</button>
                </div>
            </div>

            <div style="margin-top:16px;" class="toolbar">
                <label class="switch"><input id="fForks" type="checkbox"> 仅显示 Fork</label>
                <label class="switch"><input id="fPrivate" type="checkbox"> 仅显示 Private</label>
                <label class="switch"><input id="fMatch" type="text" placeholder="名称包含… (可选)" style="width:220px;"> </label>
                <span class="chip" id="repoCount">未加载</span>
            </div>

            <div style="margin-top:12px;" class="toolbar">
                <label class="switch"><input id="dryRun" type="checkbox" checked> Dry‑run（仅预演，不执行删除）</label>
                <button id="selectAll" class="btn">全选/反选</button>
                <button id="deleteBtn" class="btn btn-danger" disabled>删除所选</button>
            </div>

            <div style="margin-top:12px" class="table-wrap">
                <table id="table">
                    <thead>
                    <tr>
                        <th style="width:46px"><input type="checkbox" id="checkAll"></th>
                        <th>仓库</th>
                        <th style="width:90px">Fork</th>
                        <th style="width:90px">Private</th>
                        <th style="width:140px">状态</th>
                    </tr>
                    </thead>
                    <tbody id="tbody">
                    <tr><td colspan="6" class="muted">未加载</td></tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top:12px">
                <div class="footer">提示：删除操作不可恢复。若使用 Dry‑run，会仅显示“将要删除”的条目，不会真的请求 API。</div>
            </div>

            <div style="margin-top:16px">
                <div class="log" id="log"></div>
            </div>
        </div>
    </div>
</div>

<script src="deleteRepos.js"></script>
</body>
</html>
